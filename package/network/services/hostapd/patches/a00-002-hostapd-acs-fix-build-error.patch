--- a/wpa_supplicant/events.c
+++ b/wpa_supplicant/events.c
@@ -3947,7 +3947,7 @@ void supplicant_event(void *ctx, enum wp
 #endif /* CONFIG_AP */
 		break;
 	case EVENT_ACS_CHANNEL_SELECTED:
-#ifdef CONFIG_ACS
+#if defined(CONFIG_ACS) && defined(CONFIG_AP)
 		if (!wpa_s->ap_iface)
 			break;
 		hostapd_acs_channel_selected(wpa_s->ap_iface->bss[0],
